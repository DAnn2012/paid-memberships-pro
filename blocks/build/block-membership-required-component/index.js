(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,l=window.wp.components,s=window.wp.blockEditor,i=window.wp.data;wp.hooks.addFilter("blocks.registerBlockType","paid-memberships-pro/core-visibility",(function(e,t){return void 0!==e.attributes&&t.startsWith("core/")&&(e.attributes=Object.assign(e.attributes,{visibilityBlockEnabled:{type:"boolean",default:!1},invert_restrictions:{type:"string",default:"0"},segment:{type:"string",default:"all"},levels:{type:"array",default:[]},show_noaccess:{type:"string",default:"0"}})),e}));const o=wp.compose.createHigherOrderComponent((o=>r=>{const{Fragment:n}=wp.element,{isSelected:a}=r;return(0,e.createElement)(n,null,(0,e.createElement)(o,r),a&&r.name.startsWith("core/")&&function(o){const{attributes:{visibilityBlockEnabled:r,invert_restrictions:n,segment:a,levels:c,show_noaccess:p},setAttributes:m}=o,b=(0,i.select)("core/block-editor").getBlockHierarchyRootClientId(o.clientId),d=(0,i.select)("core/block-editor").getBlock(b).name===o.name,h=e=>{const t=pmpro.all_level_values_and_labels.map((e=>e.value+""));m({levels:e?t:[]})},_=pmpro.all_level_values_and_labels.map((t=>[(0,e.createElement)(l.CheckboxControl,{label:t.label,checked:c.some((e=>e==t.value)),onChange:function(e){if(e&&!c.some((e=>e==t.value))){const e=c.slice();e.push(t.value+""),m({levels:e})}else if(!e&&c.some((e=>e==t.value))){const e=c.filter((e=>e!=t.value));m({levels:e})}}})]));return d&&(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,t.__)("Content Visibility","paid-memberships-pro"),initialOpen:!0},"pmpro/membership"!==o.name&&(0,e.createElement)(l.ToggleControl,{label:r?(0,t.__)("Disable Content Visibility for this block","paid-memberships-pro"):(0,t.__)("Enable Content Visibility for this block","paid-memberships-pro"),onChange:e=>{m({visibilityBlockEnabled:!!e})},checked:r}),(0,e.createElement)("div",{style:{display:r?"block":"none"}},(0,e.createElement)(l.__experimentalHStack,null,(0,e.createElement)(l.Button,{className:"pmpro-block-require-membership-element__set-show-button",icon:"visibility",variant:"0"===n?"primary":"secondary",style:{flexGrow:"1",justifyContent:"center"},onClick:()=>m({invert_restrictions:"0"})},(0,t.__)("Show","paid-memberships-pro")),(0,e.createElement)(l.Button,{className:"pmpro-block-require-membership-element__set-hide-button",icon:"hidden",variant:"1"===n?"primary":"secondary",style:{flexGrow:"1",justifyContent:"center"},onClick:()=>m({invert_restrictions:"1"})},(0,t.__)("Hide","paid-memberships-pro"))),(0,e.createElement)("br",null),(0,e.createElement)(l.SelectControl,{value:a,label:"1"===n?(0,t.__)("Hide content from:","paid-memberships-pro"):(0,t.__)("Show content to:","paid-memberships-pro"),options:[{label:(0,t.__)("All Members","paid-memberships-pro"),value:"all"},{label:(0,t.__)("Specific Membership Levels","paid-memberships-pro"),value:"specific"},{label:(0,t.__)("Logged-In Users","paid-memberships-pro"),value:"logged_in"}],onChange:e=>{m({segment:e,levels:[]})}}),"specific"==a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,t.__)("Membership Levels","paid-memberships-pro"))),(0,e.createElement)("p",null,(0,t.__)("Select","paid-memberships-pro")," ",(0,e.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),h(!0)}},(0,t.__)("All","paid-memberships-pro"))," | ",(0,e.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),h(!1)}},(0,t.__)("None","paid-memberships-pro"))),(0,e.createElement)("div",{class:"pmpro-block-inspector-scrollable"},_)),"0"==n&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.SelectControl,{value:p,label:(0,t.__)("Show No Access Message?","paid-memberships-pro"),help:(0,t.__)("Modify the 'no access' message on the Memberships > Advanced Settings page.","paid-memberships-pro"),options:[{label:(0,t.__)("No - Hide this block if the user does not have access","paid-memberships-pro"),value:"0"},{label:(0,t.__)("Yes - Show the 'no access' message if the user does not have access","paid-memberships-pro"),value:"1"}],onChange:e=>m({show_noaccess:e})})))))}(r))}),"membershipRequiredComponent");wp.hooks.addFilter("editor.BlockEdit","paid-memberships-pro/core-visibility",o)})();